---
title: Выбор правильного размещения в Azure
description: Узнайте, какой способ переноса в Azure подходит для вашего веб-приложения ASP.NET.
keywords: Azure .NET, ASP.NET, App Service, VM, virtual machine, Web App, migrate, migration
author: CESARDELATORRE
manager: wpickett
ms.author: cesardl
ms.date: 11/15/2017
ms.topic: article
ms.technology: azure
ms.devlang: dotnet
ms.service: multiple
ms.custom: devcenter, casoper
ms.openlocfilehash: dbf54bb1a6e3d612ef8363a6b30e06b388b4490f
ms.sourcegitcommit: 3e904e6e4f04f1c92d729459434c85faff32e386
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/09/2017
ms.locfileid: "26588467"
---
# <a name="choose-the-right-azure-hosting-option"></a><span data-ttu-id="1aaed-104">Выбор правильного размещения в Azure</span><span class="sxs-lookup"><span data-stu-id="1aaed-104">Choose the right Azure hosting option</span></span>

<span data-ttu-id="1aaed-105">В этом документе приводится ряд рекомендаций и сравнение вариантов, предлагаемых в Azure при переносе существующих приложений .NET Framework из локальной среды в Azure.</span><span class="sxs-lookup"><span data-stu-id="1aaed-105">This document provides multiple considerations and comparisons between the multiple choices you have in Azure when migrating your existing .NET Framework applications from on-premises to Azure.</span></span>

<span data-ttu-id="1aaed-106">При переносе существующих приложений .NET Framework в Azure следует учитывать следующие важные аспекты:</span><span class="sxs-lookup"><span data-stu-id="1aaed-106">The fundamental areas to consider when migrating existing .NET applications to Azure are:</span></span>

1.  <span data-ttu-id="1aaed-107">Варианты вычислительных сред.</span><span class="sxs-lookup"><span data-stu-id="1aaed-107">Compute choices</span></span>
2.  <span data-ttu-id="1aaed-108">Варианты баз данных.</span><span class="sxs-lookup"><span data-stu-id="1aaed-108">Database choices</span></span>
3.  <span data-ttu-id="1aaed-109">Сетевые подключения и безопасность.</span><span class="sxs-lookup"><span data-stu-id="1aaed-109">Networking and security considerations</span></span>
4.  <span data-ttu-id="1aaed-110">Проверка подлинности и авторизация.</span><span class="sxs-lookup"><span data-stu-id="1aaed-110">Authentication and authorization considerations</span></span>

## <a name="compute-choices"></a><span data-ttu-id="1aaed-111">Варианты вычислительных сред</span><span class="sxs-lookup"><span data-stu-id="1aaed-111">Compute choices</span></span>

<span data-ttu-id="1aaed-112">Для переноса существующих приложений .NET Framework в Azure существует несколько вариантов.</span><span class="sxs-lookup"><span data-stu-id="1aaed-112">When migrating existing .NET Framework applications to Azure you have multiple choices.</span></span>  <span data-ttu-id="1aaed-113">Но так как платформа .NET Framework работает только с ОС Windows, эти варианты ограничиваются службами вычислений на базе Windows.</span><span class="sxs-lookup"><span data-stu-id="1aaed-113">However, since .NET Framework depends on Windows, the following choices are limited to Windows-based compute services.</span></span>

<span data-ttu-id="1aaed-114">В таблице ниже приводится несколько сравнений и рекомендаций, которые помогут вам выбрать правильную вычислительную среду при переносе существующего приложения .NET.</span><span class="sxs-lookup"><span data-stu-id="1aaed-114">The following table shows several comparisons and recommendations to help you choose the right compute migration path for your existing .NET application.</span></span>

|                 | <span data-ttu-id="1aaed-115">Виртуальные машины Azure</span><span class="sxs-lookup"><span data-stu-id="1aaed-115">Azure VMs</span></span> | <span data-ttu-id="1aaed-116">Служба приложений Azure</span><span class="sxs-lookup"><span data-stu-id="1aaed-116">Azure App Service</span></span> | <span data-ttu-id="1aaed-117">Контейнеры Windows</span><span class="sxs-lookup"><span data-stu-id="1aaed-117">Windows Containers</span></span> |
|-----------------|-----------|-------------------|--------------------|
|<span data-ttu-id="1aaed-118">Сценарии использования</span><span class="sxs-lookup"><span data-stu-id="1aaed-118">When to use</span></span>      |<ul><li><span data-ttu-id="1aaed-119">Приложение в значительной степени зависит от сервера и локально хранящихся MSI-файлов установки.</span><span class="sxs-lookup"><span data-stu-id="1aaed-119">Application has strong dependencies on the server and local .msi installations.</span></span></li><li><span data-ttu-id="1aaed-120">Вам нужен самый простой способ переноса приложения.</span><span class="sxs-lookup"><span data-stu-id="1aaed-120">You want to easiest application migration path</span></span></li></ul>|<span data-ttu-id="1aaed-121">Приложение не зависит от сервера, это просто "чистое" веб-приложение ASP.NET (MVC, WebForm) или n-уровневое приложение (Web API, WCF) с доступом к серверу базы данных.</span><span class="sxs-lookup"><span data-stu-id="1aaed-121">App has no dependencies on the server, it is just a clean ASP.NET web app (MVC, WebForm) or N-Tier app (Web API, WCf) accessing a database server.</span></span> |<ul><li><span data-ttu-id="1aaed-122">Приложение зависит от сервера-источника, но эти зависимости можно включить в образ Docker Windows.</span><span class="sxs-lookup"><span data-stu-id="1aaed-122">Application has dependencies on the original server but those dependencies can be included in the Docker Windows image.</span></span></li><li><span data-ttu-id="1aaed-123">Необходимо модернизировать приложение, чтобы подготовить его к процессам [DevOps в облаке](https://docs.microsoft.com/dotnet/standard/modernize-with-azure-and-containers/lift-and-shift-existing-apps-devops/reasons-to-lift-and-shift-existing-net-apps-to-cloud-devops-ready-applications).</span><span class="sxs-lookup"><span data-stu-id="1aaed-123">Want to modernize the app so it is [Cloud DevOps-Ready](https://docs.microsoft.com/dotnet/standard/modernize-with-azure-and-containers/lift-and-shift-existing-apps-devops/reasons-to-lift-and-shift-existing-net-apps-to-cloud-devops-ready-applications)</span></span></li></ul>|
|<span data-ttu-id="1aaed-124">Преимущества</span><span class="sxs-lookup"><span data-stu-id="1aaed-124">Pros & benefits</span></span>  |<ul><li><span data-ttu-id="1aaed-125">Самый простой способ переноса.</span><span class="sxs-lookup"><span data-stu-id="1aaed-125">Easiest migration path</span></span></li><li><span data-ttu-id="1aaed-126">Знакомая среда.</span><span class="sxs-lookup"><span data-stu-id="1aaed-126">Familiar environment.</span></span> <span data-ttu-id="1aaed-127">В качестве среды развертывания используется виртуальная машина, которая очень похожа на локальные серверы.</span><span class="sxs-lookup"><span data-stu-id="1aaed-127">Deployment environment is a VM so very similar to on-premises servers.</span></span></li></ul> |<span data-ttu-id="1aaed-128">Текущее обслуживание PaaS — простой способ масштабирования приложений и управления ими в Azure.</span><span class="sxs-lookup"><span data-stu-id="1aaed-128">Ongoing PaaS maintenance, simplest way to manage and scale apps in Azure.</span></span> |<ul><li><span data-ttu-id="1aaed-129">Подготовлены к новым возможностям и процессам DevOps в облаке с зависимостями, включенными в контейнеры приложений.</span><span class="sxs-lookup"><span data-stu-id="1aaed-129">Prepared for the future, Cloud DevOps-Ready with dependencies included in the app’s containers.</span></span></li><li><span data-ttu-id="1aaed-130">Практически нет необходимости в рефакторинге кода .NET или C#.</span><span class="sxs-lookup"><span data-stu-id="1aaed-130">Almost no need to re-factor .NET /C# code.</span></span></li></ul> |
|<span data-ttu-id="1aaed-131">Недостатки</span><span class="sxs-lookup"><span data-stu-id="1aaed-131">Cons</span></span>             |<span data-ttu-id="1aaed-132">Это инфраструктура как услуга (IaaS).</span><span class="sxs-lookup"><span data-stu-id="1aaed-132">It is IaaS.</span></span> <span data-ttu-id="1aaed-133">Обслуживание обходится дорого.</span><span class="sxs-lookup"><span data-stu-id="1aaed-133">Maintenance is costly.</span></span> <span data-ttu-id="1aaed-134">Вам придется управлять такими элементами инфраструктуры виртуальных машин, как сеть, подсистема балансировки нагрузки, горизонтальное масштабирование, службы IIS и т. д.</span><span class="sxs-lookup"><span data-stu-id="1aaed-134">You have to manage VMs infrastructure about networking, load-balancer, scale-out, IIS management, etc.</span></span> |<ul><li><span data-ttu-id="1aaed-135">[Поддерживаются](http://www.migratetoazure.net/ReadinessAssessment) не все приложения.</span><span class="sxs-lookup"><span data-stu-id="1aaed-135">Not all apps are [supported](http://www.migratetoazure.net/ReadinessAssessment)</span></span></li><li><span data-ttu-id="1aaed-136">Для некоторых приложений потребуется выполнить рефакторинг и даже незначительно изменить архитектуру, чтобы они поддерживали службу приложений Azure.</span><span class="sxs-lookup"><span data-stu-id="1aaed-136">Some apps might need to be refactored and even slightly re-architected, so they support Azure App Service.</span></span></li></ul> |<ul><li><span data-ttu-id="1aaed-137">Потребуется освоить навыки работы с Docker.</span><span class="sxs-lookup"><span data-stu-id="1aaed-137">Docker’s skills learning curve</span></span></li><li><span data-ttu-id="1aaed-138">Требуется изменить некоторые параметры конфигурации приложения и код.</span><span class="sxs-lookup"><span data-stu-id="1aaed-138">Some code and app configuration settings changes</span></span></li></ul>|
|<span data-ttu-id="1aaed-139">Требования</span><span class="sxs-lookup"><span data-stu-id="1aaed-139">Requirements</span></span> |<span data-ttu-id="1aaed-140">Виртуальная машина Windows Server с такими же требованиями, как и для приложения в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="1aaed-140">Windows Server VM with the same requirements than the app for on-premises</span></span> | <span data-ttu-id="1aaed-141">Требования службы приложений Azure см. на странице [анализа совместимости для службы приложений Azure](https://www.migratetoazure.net/Resources).</span><span class="sxs-lookup"><span data-stu-id="1aaed-141">Azure App Service requirements specified at the [Compatibility analysis for Azure App Service](https://www.migratetoazure.net/Resources).</span></span> |<ul><li>[<span data-ttu-id="1aaed-142">Windows Server 2016 с контейнерами — виртуальная машина Azure</span><span class="sxs-lookup"><span data-stu-id="1aaed-142">Windows Server 2016 with Containers - Azure VM</span></span>](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.WindowsServer?tab=Overview)<br /><span data-ttu-id="1aaed-143">или</span><span class="sxs-lookup"><span data-stu-id="1aaed-143">or</span></span></li><li><span data-ttu-id="1aaed-144">[Служба контейнеров Azure (AKS)](https://azure.microsoft.com/services/container-service/) (то есть оркестратор Kubernetes)</span><span class="sxs-lookup"><span data-stu-id="1aaed-144">[Azure Container Service (AKS)](https://azure.microsoft.com/services/container-service/) (That is Kubernetes orchestrator)</span></span><br /><span data-ttu-id="1aaed-145">или</span><span class="sxs-lookup"><span data-stu-id="1aaed-145">or</span></span><li><span data-ttu-id="1aaed-146">оркестратор [Azure Service Fabric](https://azure.microsoft.com/services/service-fabric/)</span><span class="sxs-lookup"><span data-stu-id="1aaed-146">[Azure Service Fabric](https://azure.microsoft.com/services/service-fabric/) orchestrator</span></span></li></ul> |
|<span data-ttu-id="1aaed-147">Как осуществить перенос</span><span class="sxs-lookup"><span data-stu-id="1aaed-147">How to migrate</span></span> |<span data-ttu-id="1aaed-148">См. статью [Перенос веб-приложения ASP.NET на виртуальную машину Azure](https://go.microsoft.com/fwlink/?linkid=862531).</span><span class="sxs-lookup"><span data-stu-id="1aaed-148">See [Migrate to Azure Virtual Machines](https://go.microsoft.com/fwlink/?linkid=862531)</span></span> | <span data-ttu-id="1aaed-149">См. статью [Перенос веб-приложения ASP.NET в службу приложений Azure](https://go.microsoft.com/fwlink/?linkid=862532).</span><span class="sxs-lookup"><span data-stu-id="1aaed-149">See [Migrate Azure App Service](https://go.microsoft.com/fwlink/?linkid=862532)</span></span> | <span data-ttu-id="1aaed-150">Следуйте рекомендациям, сценариям и пошаговым инструкциям, которые приводятся в электронной книге [Modernize existing .NET applications with Azure cloud and Windows Containers](https://aka.ms/liftandshiftwithcontainersebook) (Модернизация существующих приложений .NET с помощью облака Azure и контейнеров Windows).</span><span class="sxs-lookup"><span data-stu-id="1aaed-150">Follow considerations, scenarios and walkthroughs explained in the [Modernizing existing .NET apps with Azure and Windows Containers eBook](https://aka.ms/liftandshiftwithcontainersebook)</span></span> |

 <span data-ttu-id="1aaed-151">На следующей блок-схеме показано дерево принятия решений при планировании переноса существующих приложений .NET Framework в Azure. Вариант A — это первый вариант, который нужно опробовать и реализовать, если он подходит, а вариант B — это самый простой способ.</span><span class="sxs-lookup"><span data-stu-id="1aaed-151">The following flowchart diagram shows a decision tree when planning a migration to Azure for your existing .NET Framework applications, being option A the first option to try and perform if it is viable, but option B the easiest path to perform.</span></span>

![Блок-схема, на которой показано дерево принятия решений по размещению](media/dotnet-howto-choose-migration/decision-tree.png)

## <a name="database-choices"></a><span data-ttu-id="1aaed-153">Варианты баз данных</span><span class="sxs-lookup"><span data-stu-id="1aaed-153">Database choices</span></span>

<span data-ttu-id="1aaed-154">Для переноса реляционных баз данных в Azure существует несколько вариантов.</span><span class="sxs-lookup"><span data-stu-id="1aaed-154">When migrating relational databases to Azure you have multiple choices.</span></span> <span data-ttu-id="1aaed-155">Чтобы выбрать правильный способ переноса для существующего приложения .NET, см. статью [Перенос базы данных SQL Server в Azure](https://go.microsoft.com/fwlink/?linkid=862533).</span><span class="sxs-lookup"><span data-stu-id="1aaed-155">See [Migrate your SQL Server database to Azure](https://go.microsoft.com/fwlink/?linkid=862533) to help you choose the right database migration path for your existing .NET application.</span></span>

## <a name="networking-and-security-considerations"></a><span data-ttu-id="1aaed-156">Сетевые подключения и безопасность</span><span class="sxs-lookup"><span data-stu-id="1aaed-156">Networking and security considerations</span></span>

<span data-ttu-id="1aaed-157">При развертывании приложений в общедоступном облаке, таком как Microsoft Azure, может потребоваться изолировать и защитить некоторые сети. Для этого можно [создать сети периметра](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/), например [сеть периметра между Azure и локальным центром обработки данных](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid) или [сеть периметра между Azure и Интернетом](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-dmz).</span><span class="sxs-lookup"><span data-stu-id="1aaed-157">When deploying applications to a public cloud like Microsoft Azure, you might want to isolate and secure certain networks by [creating network DMZs](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/), such as a [DMZ between Azure and on-premises](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid) or a [DMZ between Azure and the Internet](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-dmz).</span></span> <span data-ttu-id="1aaed-158">Вы можете реализовать сети периметра, используя [виртуальные сети Microsoft Azure](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview).</span><span class="sxs-lookup"><span data-stu-id="1aaed-158">DMZs can be implemented with [Azure Virtual Network](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview).</span></span>
<span data-ttu-id="1aaed-159">Виртуальные сети Azure позволяют выполнять следующие задачи:</span><span class="sxs-lookup"><span data-stu-id="1aaed-159">Azure Virtual networks enable you to:</span></span>

- <span data-ttu-id="1aaed-160">Создание управляемой гибридной инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="1aaed-160">Build a hybrid infrastructure that you control</span></span>
- <span data-ttu-id="1aaed-161">Использование собственных IP-адресов и DNS-серверов.</span><span class="sxs-lookup"><span data-stu-id="1aaed-161">Bring your own IP addresses and DNS servers</span></span>
- <span data-ttu-id="1aaed-162">Обеспечение безопасности подключений с помощью VPN-соединения IPsec или ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="1aaed-162">Secure your connections with an IPsec VPN or ExpressRoute</span></span>
- <span data-ttu-id="1aaed-163">Детальный контроль над трафиком между подсетями.</span><span class="sxs-lookup"><span data-stu-id="1aaed-163">Get granular control over traffic between subnets</span></span>
- <span data-ttu-id="1aaed-164">Создание сложных сетевых топологий с виртуальными модулями.</span><span class="sxs-lookup"><span data-stu-id="1aaed-164">Create sophisticated network topologies using virtual appliances</span></span>
- <span data-ttu-id="1aaed-165">Создание изолированной и безопасной среды для ваших приложений.</span><span class="sxs-lookup"><span data-stu-id="1aaed-165">Get an isolated and highly-secure environment for your applications</span></span>
 
<span data-ttu-id="1aaed-166">Чтобы приступить к созданию собственной виртуальной сети, изучите [документацию по виртуальным сетям Azure](https://docs.microsoft.com/azure/virtual-network/).</span><span class="sxs-lookup"><span data-stu-id="1aaed-166">To get started building your own virtual network, see the [Azure Virtual Network documentation](https://docs.microsoft.com/azure/virtual-network/).</span></span>

## <a name="authentication-and-authorization-considerations-when-migrating-to-azure"></a><span data-ttu-id="1aaed-167">Проверка подлинности и авторизация при переносе в Azure</span><span class="sxs-lookup"><span data-stu-id="1aaed-167">Authentication and authorization considerations when migrating to Azure</span></span>

<span data-ttu-id="1aaed-168">Безопасность — самый важный вопрос для любой организации, которая переносит свои данные в облако.</span><span class="sxs-lookup"><span data-stu-id="1aaed-168">A top concern of any organization moving to the cloud is security.</span></span> <span data-ttu-id="1aaed-169">Большинство компаний потратили много времени, денег и усилий разработчиков на создание и разработку модели безопасности. Поэтому важно, чтобы компании могли использовать существующие ресурсы, например хранилища удостоверений и решения единого входа.</span><span class="sxs-lookup"><span data-stu-id="1aaed-169">Most companies have invested a substantial amount of time, money, and engineering into designing and developing a security model, and it’s important that they’re able to leverage existing investments such as identity stores and single sign-on solutions.</span></span>

<span data-ttu-id="1aaed-170">Большинство существующих корпоративных приложений .NET B2E, которые выполняются в локальной среде, используют Active Directory для проверки подлинности и управления удостоверениями.</span><span class="sxs-lookup"><span data-stu-id="1aaed-170">Many existing enterprise B2E .NET applications running on-premises use Active Directory for authentication and identity management.</span></span>  <span data-ttu-id="1aaed-171">Azure AD Connect позволяет интегрировать локальные каталоги с Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="1aaed-171">Azure AD Connect enables you to integrate your on-premises directories with Azure Active Directory.</span></span>  <span data-ttu-id="1aaed-172">Чтобы приступить к работе, изучите статью [Интеграция локальных каталогов с Azure Active Directory](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect).</span><span class="sxs-lookup"><span data-stu-id="1aaed-172">To get started, see [Integrate your on-premises directories with Azure Active Directory](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect).</span></span>

<span data-ttu-id="1aaed-173">При планировании дальнейших действий с Azure Active Directory ознакомьтесь со статьей [Определение требований к идентификации для решений гибридной идентификации](https://docs.microsoft.com/azure/active-directory/active-directory-hybrid-identity-design-considerations-business-needs).</span><span class="sxs-lookup"><span data-stu-id="1aaed-173">See [Identity requirements for your hybrid identity solution](https://docs.microsoft.com/azure/active-directory/active-directory-hybrid-identity-design-considerations-business-needs) for further planning related to Azure Active Directory.</span></span>

<span data-ttu-id="1aaed-174">Другие варианты связаны с протоколами проверки подлинности [OAuth](https://en.wikipedia.org/wiki/OAuth) и [OpenID](https://en.wikipedia.org/wiki/OpenID), которые часто используются в клиентских приложениях.</span><span class="sxs-lookup"><span data-stu-id="1aaed-174">Other authentication protocol choices are [OAuth](https://en.wikipedia.org/wiki/OAuth) and [OpenID](https://en.wikipedia.org/wiki/OpenID), which are common in consumer-facing applications.</span></span>  <span data-ttu-id="1aaed-175">Как правило, когда применяются автономные базы данных удостоверений, например базы данных SQL удостоверений ASP.NET с программой-оболочкой IdentityServer4, использующей OAuth, подключение к локальным базам данных или каталогам не требуется.</span><span class="sxs-lookup"><span data-stu-id="1aaed-175">When using autonomous identity databases, such as an ASP.NET Identity SQL database wrapped by IdentityServer4 using OAuth, no connectivity to on-premises databases or directories is usually required.</span></span>

## <a name="next-steps"></a><span data-ttu-id="1aaed-176">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="1aaed-176">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="1aaed-177">Перенос веб-приложения ASP.NET в службу приложений Azure</span><span class="sxs-lookup"><span data-stu-id="1aaed-177">Migrate an ASP.NET web application to Azure App Service</span></span>](dotnet-howto-migrate-app-service.md)