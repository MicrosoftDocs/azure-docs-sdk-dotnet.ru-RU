---
title: Выбор правильного размещения в Azure
description: Узнайте, какой способ переноса в Azure подходит для вашего веб-приложения ASP.NET.
author: CESARDELATORRE
ms.author: cesardl
ms.date: 11/15/2017
ms.openlocfilehash: 20bdef0614d8d492c3724f5a0f74f5ec9b2aa032
ms.sourcegitcommit: 1cf4550df8ed3236d838f561f6177d14d89b5e44
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/16/2018
ms.locfileid: "49348226"
---
# <a name="choose-the-right-azure-hosting-option"></a><span data-ttu-id="d5a9f-103">Выбор правильного размещения в Azure</span><span class="sxs-lookup"><span data-stu-id="d5a9f-103">Choose the right Azure hosting option</span></span>

<span data-ttu-id="d5a9f-104">В этом документе приводится ряд рекомендаций и сравнение вариантов, предлагаемых в Azure при переносе существующих приложений .NET Framework из локальной среды в Azure.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-104">This document provides multiple considerations and comparisons between the multiple choices you have in Azure when migrating your existing .NET Framework applications from on-premises to Azure.</span></span>

<span data-ttu-id="d5a9f-105">При переносе существующих приложений .NET Framework в Azure следует учитывать следующие важные аспекты:</span><span class="sxs-lookup"><span data-stu-id="d5a9f-105">The fundamental areas to consider when migrating existing .NET applications to Azure are:</span></span>

1.  <span data-ttu-id="d5a9f-106">Варианты вычислительных сред.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-106">Compute choices</span></span>
2.  <span data-ttu-id="d5a9f-107">Варианты баз данных.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-107">Database choices</span></span>
3.  <span data-ttu-id="d5a9f-108">Сетевые подключения и безопасность.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-108">Networking and security considerations</span></span>
4.  <span data-ttu-id="d5a9f-109">Проверка подлинности и авторизация.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-109">Authentication and authorization considerations</span></span>

## <a name="compute-choices"></a><span data-ttu-id="d5a9f-110">Варианты вычислительных сред</span><span class="sxs-lookup"><span data-stu-id="d5a9f-110">Compute choices</span></span>

<span data-ttu-id="d5a9f-111">Для переноса существующих приложений .NET Framework в Azure существует несколько вариантов.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-111">When migrating existing .NET Framework applications to Azure you have multiple choices.</span></span>  <span data-ttu-id="d5a9f-112">Но так как платформа .NET Framework работает только с ОС Windows, эти варианты ограничиваются службами вычислений на базе Windows.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-112">However, since .NET Framework depends on Windows, the following choices are limited to Windows-based compute services.</span></span>

<span data-ttu-id="d5a9f-113">В таблице ниже приводится несколько сравнений и рекомендаций, которые помогут вам выбрать правильную вычислительную среду при переносе существующего приложения .NET.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-113">The following table shows several comparisons and recommendations to help you choose the right compute migration path for your existing .NET application.</span></span>

|                 | <span data-ttu-id="d5a9f-114">Виртуальные машины Azure</span><span class="sxs-lookup"><span data-stu-id="d5a9f-114">Azure VMs</span></span> | <span data-ttu-id="d5a9f-115">Служба приложений Azure</span><span class="sxs-lookup"><span data-stu-id="d5a9f-115">Azure App Service</span></span> | <span data-ttu-id="d5a9f-116">Контейнеры Windows</span><span class="sxs-lookup"><span data-stu-id="d5a9f-116">Windows Containers</span></span> |
|-----------------|-----------|-------------------|--------------------|
|<span data-ttu-id="d5a9f-117">Сценарии использования</span><span class="sxs-lookup"><span data-stu-id="d5a9f-117">When to use</span></span>      |<ul><li><span data-ttu-id="d5a9f-118">Приложение в значительной степени зависит от сервера и локально хранящихся MSI-файлов установки.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-118">Application has strong dependencies on the server and local .msi installations.</span></span></li><li><span data-ttu-id="d5a9f-119">Вам нужен самый простой способ переноса приложения</span><span class="sxs-lookup"><span data-stu-id="d5a9f-119">You want the easiest application migration path</span></span></li></ul>|<span data-ttu-id="d5a9f-120">Приложение не зависит от сервера, это просто "чистое" веб-приложение ASP.NET (MVC, WebForm) или n-уровневое приложение (Web API, WCF) с доступом к серверу базы данных.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-120">App has no dependencies on the server, it is just a clean ASP.NET web app (MVC, WebForm) or N-Tier app (Web API, WCf) accessing a database server.</span></span> |<ul><li><span data-ttu-id="d5a9f-121">Приложение зависит от сервера-источника, но эти зависимости можно включить в образ Docker Windows.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-121">Application has dependencies on the original server but those dependencies can be included in the Docker Windows image.</span></span></li><li><span data-ttu-id="d5a9f-122">Необходимо модернизировать приложение, чтобы подготовить его к процессам [DevOps в облаке](https://docs.microsoft.com/dotnet/standard/modernize-with-azure-and-containers/lift-and-shift-existing-apps-devops/reasons-to-lift-and-shift-existing-net-apps-to-cloud-devops-ready-applications).</span><span class="sxs-lookup"><span data-stu-id="d5a9f-122">Want to modernize the app so it is [Cloud DevOps-Ready](https://docs.microsoft.com/dotnet/standard/modernize-with-azure-and-containers/lift-and-shift-existing-apps-devops/reasons-to-lift-and-shift-existing-net-apps-to-cloud-devops-ready-applications)</span></span></li></ul>|
|<span data-ttu-id="d5a9f-123">Преимущества</span><span class="sxs-lookup"><span data-stu-id="d5a9f-123">Pros & benefits</span></span>  |<ul><li><span data-ttu-id="d5a9f-124">Самый простой способ переноса.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-124">Easiest migration path</span></span></li><li><span data-ttu-id="d5a9f-125">Знакомая среда.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-125">Familiar environment.</span></span> <span data-ttu-id="d5a9f-126">В качестве среды развертывания используется виртуальная машина, которая очень похожа на локальные серверы.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-126">Deployment environment is a VM so very similar to on-premises servers.</span></span></li></ul> |<span data-ttu-id="d5a9f-127">Текущее обслуживание PaaS — простой способ масштабирования приложений и управления ими в Azure.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-127">Ongoing PaaS maintenance, simplest way to manage and scale apps in Azure.</span></span> |<ul><li><span data-ttu-id="d5a9f-128">Подготовлены к новым возможностям и процессам DevOps в облаке с зависимостями, включенными в контейнеры приложений.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-128">Prepared for the future, Cloud DevOps-Ready with dependencies included in the app’s containers.</span></span></li><li><span data-ttu-id="d5a9f-129">Практически нет необходимости в рефакторинге кода .NET или C#.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-129">Almost no need to re-factor .NET /C# code.</span></span></li></ul> |
|<span data-ttu-id="d5a9f-130">Недостатки</span><span class="sxs-lookup"><span data-stu-id="d5a9f-130">Cons</span></span>             |<span data-ttu-id="d5a9f-131">Это инфраструктура как услуга (IaaS).</span><span class="sxs-lookup"><span data-stu-id="d5a9f-131">It is IaaS.</span></span> <span data-ttu-id="d5a9f-132">Обслуживание обходится дорого.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-132">Maintenance is costly.</span></span> <span data-ttu-id="d5a9f-133">Вам придется управлять такими элементами инфраструктуры виртуальных машин, как сеть, подсистема балансировки нагрузки, горизонтальное масштабирование, службы IIS и т. д.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-133">You have to manage VMs infrastructure about networking, load-balancer, scale-out, IIS management, etc.</span></span> |<ul><li><span data-ttu-id="d5a9f-134">[Поддерживаются](http://www.migratetoazure.net/ReadinessAssessment) не все приложения.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-134">Not all apps are [supported](http://www.migratetoazure.net/ReadinessAssessment)</span></span></li><li><span data-ttu-id="d5a9f-135">Для некоторых приложений потребуется выполнить рефакторинг и даже незначительно изменить архитектуру, чтобы они поддерживали службу приложений Azure.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-135">Some apps might need to be refactored and even slightly re-architected, so they support Azure App Service.</span></span></li></ul> |<ul><li><span data-ttu-id="d5a9f-136">Потребуется освоить навыки работы с Docker.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-136">Docker’s skills learning curve</span></span></li><li><span data-ttu-id="d5a9f-137">Требуется изменить некоторые параметры конфигурации приложения и код.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-137">Some code and app configuration settings changes</span></span></li></ul>|
|<span data-ttu-id="d5a9f-138">Требования</span><span class="sxs-lookup"><span data-stu-id="d5a9f-138">Requirements</span></span> |<span data-ttu-id="d5a9f-139">Виртуальная машина Windows Server с такими же требованиями, как и для приложения в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-139">Windows Server VM with the same requirements than the app for on-premises</span></span> | <span data-ttu-id="d5a9f-140">Требования службы приложений Azure см. на странице [анализа совместимости для службы приложений Azure](https://www.migratetoazure.net/Resources).</span><span class="sxs-lookup"><span data-stu-id="d5a9f-140">Azure App Service requirements specified at the [Compatibility analysis for Azure App Service](https://www.migratetoazure.net/Resources).</span></span> |<ul><li>[<span data-ttu-id="d5a9f-141">Windows Server 2016 с контейнерами — виртуальная машина Azure</span><span class="sxs-lookup"><span data-stu-id="d5a9f-141">Windows Server 2016 with Containers - Azure VM</span></span>](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.WindowsServer?tab=Overview)<br /><span data-ttu-id="d5a9f-142">или</span><span class="sxs-lookup"><span data-stu-id="d5a9f-142">or</span></span></li><li><span data-ttu-id="d5a9f-143">[Служба контейнеров Azure (AKS)](https://azure.microsoft.com/services/container-service/) (то есть оркестратор Kubernetes)</span><span class="sxs-lookup"><span data-stu-id="d5a9f-143">[Azure Container Service (AKS)](https://azure.microsoft.com/services/container-service/) (That is Kubernetes orchestrator)</span></span><br /><span data-ttu-id="d5a9f-144">или</span><span class="sxs-lookup"><span data-stu-id="d5a9f-144">or</span></span><li><span data-ttu-id="d5a9f-145">оркестратор [Azure Service Fabric](https://azure.microsoft.com/services/service-fabric/)</span><span class="sxs-lookup"><span data-stu-id="d5a9f-145">[Azure Service Fabric](https://azure.microsoft.com/services/service-fabric/) orchestrator</span></span></li></ul> |
|<span data-ttu-id="d5a9f-146">Как осуществить перенос</span><span class="sxs-lookup"><span data-stu-id="d5a9f-146">How to migrate</span></span> |<span data-ttu-id="d5a9f-147">См. статью [Перенос веб-приложения ASP.NET на виртуальную машину Azure](https://go.microsoft.com/fwlink/?linkid=862531).</span><span class="sxs-lookup"><span data-stu-id="d5a9f-147">See [Migrate to Azure Virtual Machines](https://go.microsoft.com/fwlink/?linkid=862531)</span></span> | <span data-ttu-id="d5a9f-148">См. статью [Перенос веб-приложения ASP.NET в службу приложений Azure](https://go.microsoft.com/fwlink/?linkid=862532).</span><span class="sxs-lookup"><span data-stu-id="d5a9f-148">See [Migrate Azure App Service](https://go.microsoft.com/fwlink/?linkid=862532)</span></span> | <span data-ttu-id="d5a9f-149">Следуйте рекомендациям, сценариям и пошаговым инструкциям, которые приводятся в электронной книге [Modernize existing .NET applications with Azure cloud and Windows Containers](https://aka.ms/liftandshiftwithcontainersebook) (Модернизация существующих приложений .NET с помощью облака Azure и контейнеров Windows).</span><span class="sxs-lookup"><span data-stu-id="d5a9f-149">Follow considerations, scenarios and walkthroughs explained in the [Modernizing existing .NET apps with Azure and Windows Containers eBook](https://aka.ms/liftandshiftwithcontainersebook)</span></span> |

 <span data-ttu-id="d5a9f-150">На следующей блок-схеме показано дерево принятия решений при планировании переноса существующих приложений .NET Framework в Azure. Вариант A — это первый вариант, который нужно опробовать и реализовать, если он подходит, а вариант B — это самый простой способ.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-150">The following flowchart diagram shows a decision tree when planning a migration to Azure for your existing .NET Framework applications, being option A the first option to try and perform if it is viable, but option B the easiest path to perform.</span></span>

![Блок-схема, на которой показано дерево принятия решений по размещению](media/dotnet-howto-choose-migration/decision-tree.png)

## <a name="database-choices"></a><span data-ttu-id="d5a9f-152">Варианты баз данных</span><span class="sxs-lookup"><span data-stu-id="d5a9f-152">Database choices</span></span>

<span data-ttu-id="d5a9f-153">Для переноса реляционных баз данных в Azure существует несколько вариантов.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-153">When migrating relational databases to Azure you have multiple choices.</span></span> <span data-ttu-id="d5a9f-154">Чтобы выбрать правильный способ переноса для существующего приложения .NET, см. статью [Перенос базы данных SQL Server в Azure](https://go.microsoft.com/fwlink/?linkid=862533).</span><span class="sxs-lookup"><span data-stu-id="d5a9f-154">See [Migrate your SQL Server database to Azure](https://go.microsoft.com/fwlink/?linkid=862533) to help you choose the right database migration path for your existing .NET application.</span></span>

## <a name="networking-and-security-considerations"></a><span data-ttu-id="d5a9f-155">Сетевые подключения и безопасность</span><span class="sxs-lookup"><span data-stu-id="d5a9f-155">Networking and security considerations</span></span>

<span data-ttu-id="d5a9f-156">При развертывании приложений в общедоступном облаке, таком как Microsoft Azure, может потребоваться изолировать и защитить некоторые сети. Для этого можно [создать сети периметра](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/), например [сеть периметра между Azure и локальным центром обработки данных](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid) или [сеть периметра между Azure и Интернетом](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-dmz).</span><span class="sxs-lookup"><span data-stu-id="d5a9f-156">When deploying applications to a public cloud like Microsoft Azure, you might want to isolate and secure certain networks by [creating network DMZs](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/), such as a [DMZ between Azure and on-premises](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid) or a [DMZ between Azure and the Internet](https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/secure-vnet-dmz).</span></span> <span data-ttu-id="d5a9f-157">Вы можете реализовать сети периметра, используя [виртуальные сети Microsoft Azure](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview).</span><span class="sxs-lookup"><span data-stu-id="d5a9f-157">DMZs can be implemented with [Azure Virtual Network](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview).</span></span>
<span data-ttu-id="d5a9f-158">Виртуальные сети Azure позволяют выполнять следующие задачи:</span><span class="sxs-lookup"><span data-stu-id="d5a9f-158">Azure Virtual networks enable you to:</span></span>

- <span data-ttu-id="d5a9f-159">Создание управляемой гибридной инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-159">Build a hybrid infrastructure that you control</span></span>
- <span data-ttu-id="d5a9f-160">Использование собственных IP-адресов и DNS-серверов.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-160">Bring your own IP addresses and DNS servers</span></span>
- <span data-ttu-id="d5a9f-161">Обеспечение безопасности подключений с помощью VPN-соединения IPsec или ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-161">Secure your connections with an IPsec VPN or ExpressRoute</span></span>
- <span data-ttu-id="d5a9f-162">Детальный контроль над трафиком между подсетями.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-162">Get granular control over traffic between subnets</span></span>
- <span data-ttu-id="d5a9f-163">Создание сложных сетевых топологий с виртуальными модулями.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-163">Create sophisticated network topologies using virtual appliances</span></span>
- <span data-ttu-id="d5a9f-164">Создание изолированной и безопасной среды для ваших приложений.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-164">Get an isolated and highly-secure environment for your applications</span></span>
 
<span data-ttu-id="d5a9f-165">Чтобы приступить к созданию собственной виртуальной сети, изучите [документацию по виртуальным сетям Azure](https://docs.microsoft.com/azure/virtual-network/).</span><span class="sxs-lookup"><span data-stu-id="d5a9f-165">To get started building your own virtual network, see the [Azure Virtual Network documentation](https://docs.microsoft.com/azure/virtual-network/).</span></span>

## <a name="authentication-and-authorization-considerations-when-migrating-to-azure"></a><span data-ttu-id="d5a9f-166">Проверка подлинности и авторизация при переносе в Azure</span><span class="sxs-lookup"><span data-stu-id="d5a9f-166">Authentication and authorization considerations when migrating to Azure</span></span>

<span data-ttu-id="d5a9f-167">Безопасность — самый важный вопрос для любой организации, которая переносит свои данные в облако.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-167">A top concern of any organization moving to the cloud is security.</span></span> <span data-ttu-id="d5a9f-168">Большинство компаний потратили много времени, денег и усилий разработчиков на создание и разработку модели безопасности. Поэтому важно, чтобы компании могли использовать существующие ресурсы, например хранилища удостоверений и решения единого входа.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-168">Most companies have invested a substantial amount of time, money, and engineering into designing and developing a security model, and it’s important that they’re able to leverage existing investments such as identity stores and single sign-on solutions.</span></span>

<span data-ttu-id="d5a9f-169">Большинство существующих корпоративных приложений .NET B2E, которые выполняются в локальной среде, используют Active Directory для проверки подлинности и управления удостоверениями.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-169">Many existing enterprise B2E .NET applications running on-premises use Active Directory for authentication and identity management.</span></span>  <span data-ttu-id="d5a9f-170">Azure AD Connect позволяет интегрировать локальные каталоги с Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-170">Azure AD Connect enables you to integrate your on-premises directories with Azure Active Directory.</span></span>  <span data-ttu-id="d5a9f-171">Чтобы приступить к работе, изучите статью [Интеграция локальных каталогов с Azure Active Directory](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect).</span><span class="sxs-lookup"><span data-stu-id="d5a9f-171">To get started, see [Integrate your on-premises directories with Azure Active Directory](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect).</span></span>

<span data-ttu-id="d5a9f-172">При планировании дальнейших действий с Azure Active Directory ознакомьтесь со статьей [Определение требований к идентификации для решений гибридной идентификации](https://docs.microsoft.com/azure/active-directory/active-directory-hybrid-identity-design-considerations-business-needs).</span><span class="sxs-lookup"><span data-stu-id="d5a9f-172">See [Identity requirements for your hybrid identity solution](https://docs.microsoft.com/azure/active-directory/active-directory-hybrid-identity-design-considerations-business-needs) for further planning related to Azure Active Directory.</span></span>

<span data-ttu-id="d5a9f-173">Другие варианты связаны с протоколами проверки подлинности [OAuth](https://en.wikipedia.org/wiki/OAuth) и [OpenID](https://en.wikipedia.org/wiki/OpenID), которые часто используются в клиентских приложениях.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-173">Other authentication protocol choices are [OAuth](https://en.wikipedia.org/wiki/OAuth) and [OpenID](https://en.wikipedia.org/wiki/OpenID), which are common in consumer-facing applications.</span></span>  <span data-ttu-id="d5a9f-174">Как правило, когда применяются автономные базы данных удостоверений, например базы данных SQL удостоверений ASP.NET с программой-оболочкой IdentityServer4, использующей OAuth, подключение к локальным базам данных или каталогам не требуется.</span><span class="sxs-lookup"><span data-stu-id="d5a9f-174">When using autonomous identity databases, such as an ASP.NET Identity SQL database wrapped by IdentityServer4 using OAuth, no connectivity to on-premises databases or directories is usually required.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d5a9f-175">Дополнительная информация</span><span class="sxs-lookup"><span data-stu-id="d5a9f-175">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="d5a9f-176">Перенос веб-приложения ASP.NET в службу приложений Azure</span><span class="sxs-lookup"><span data-stu-id="d5a9f-176">Migrate an ASP.NET web application to Azure App Service</span></span>](dotnet-howto-migrate-app-service.md)
